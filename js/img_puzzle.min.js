function get_img_puzzle(e){function t(e){let t=e.moves,o=e.time_formatted.minutes,n=e.time_formatted.seconds,i=e.played_difficulty;alert("You win! You did it in "+t+" moves and "+o+" minute(s) and "+n+" seconds. The difficulty was "+i)}function o(){console.error("get_img_puzzle : Image could not be loaded")}function n(e,t){return Math.random()*(t-e)+e}function i(e){if(!1!==q)for(let t=0;t<e.length;t++)e[t].addEventListener("mousedown",function(o){o.preventDefault(),!1!==q&&(E=this.offsetLeft,T=this.offsetTop,z=o.pageX,S=o.pageY,this.addEventListener("mousemove",l),this.addEventListener("mouseleave",function(){this.removeEventListener("mousemove",l)}),A.addEventListener("mouseup",function(){e[t].removeEventListener("mousemove",l)}))}),e[t].addEventListener("touchstart",function(o){if(o.preventDefault(),!1===q)return;E=this.offsetLeft,T=this.offsetTop;let n=o.touches;z=n[0].pageX,S=n[0].pageY,this.addEventListener("touchmove",r),A.addEventListener("touchend",function(o){o.preventDefault(),e[t].removeEventListener("touchmove",r)})})}function l(e){this.style.left=E+e.pageX-z+"px",this.style.top=T+e.pageY-S+"px"}function r(e){var t=e.touches;this.style.left=E+t[0].pageX-z+"px",this.style.top=T+t[0].pageY-S+"px"}try{if("object"!=typeof e)throw"An object must be passed to the function! Now it is: "+typeof e}catch(e){return void console.error("get_img_puzzle : "+e)}let s=e.image,f=e.holder_div,u=e.after_win,a=e.difficulty||"regular",p=e.shuffle_delay||3e3,d=e.shuffle_integer||50,c=e.elem_shadow,h=e.on_shuffle||!1,g=e.until_shuffle||!1,m=e.is_shuffle_animation||!1;try{if("string"!=typeof s&&!Array.isArray(s))throw"images expecting to be a string or an array, "+typeof s+" given";if("string"!=typeof f)throw"div_holder expecting to be a string, "+typeof f+" given";if("function"!=typeof u&&void 0!==u)throw"after_win expecting to be a function, "+typeof u+" given";if("number"!=typeof p)throw"shuffle_delay expecting to be a number, "+typeof p+" given";if("number"!=typeof d)throw"shuffle_integer expecting to be a number, "+typeof d+" given";if("boolean"!=typeof c&&void 0!==c)throw"elem_shadow expecting to be a boolean, "+typeof c+" given";if("string"!=typeof a)throw"difficulty expecting to be a string, "+typeof a+" given";if("regular"!==a&&"hard"!==a)throw"difficulty can be regular or hard";if("function"!==h&&"boolean"===h)throw"on_shuffle expecting to be a function, "+typeof h+" given";if("function"!==g&&"boolean"===g)throw"until_shuffle expecting to be a function, "+typeof g+" given";if("boolean"!=typeof m)throw"is_shuffle_animation expecting to be a boolean, "+typeof m+" given";if(0==document.querySelector(f).offsetHeight||0==document.querySelector(f).offsetWidth)throw"The main holder's ( "+f+" ) width or height has been set to 0. It cannot be seen."}catch(e){return void console.error("get_img_puzzle : "+e)}void 0===u&&(u=t),void 0===c&&(c=!0);let y,v,x=0,_=0,b="",w="",L=new Image,q=!1;document.querySelector(f).style.position="relative",document.querySelector(f).style.overflow="hidden",L.onerror=o;let E,T,z,S,A="";if(L.onload=function(){function e(o){if(!1===q)return;let n=document.querySelectorAll(f+" ._game_output ."+o.target.classList);if("mousedown"===o.type||"touchstart"===o.type){o.target.addEventListener("mouseleave",e);for(let e=0;e<n.length;e++)n[e].style.transition="all 0s";W.push(o.target.offsetTop),W.push(o.target.offsetLeft),o.target.style.zIndex="999",0===x&&(y=new Date)}if("touchend"===o.type||"mouseup"===o.type){for(let e=0;e<n.length;e++)n[e].style.transition="all 0.3s";let e,i,l=A.getBoundingClientRect(),r=l.left,f=l.top,u=[];"mouseup"===o.type&&(e=o.clientX,i=o.clientY,u.push(e-r,i-f)),"touchend"===o.type&&(e=o.changedTouches[0].clientX,i=o.changedTouches[0].clientY,u.push(e-r,i-f));let a=o.target.getAttribute("data-piece");for(let e=0;e<n.length;e++)if(e!=a){if(u[0]>n[e].offsetLeft&&u[0]<n[e].offsetLeft+w&&u[1]>n[e].offsetTop&&u[1]<n[e].offsetTop+b){t(o.target,n[e]),x++;break}e==n.length-1&&(o.target.style.top=W[0]+"px",o.target.style.left=W[1]+"px",W=[],_++)}o.target.style.zIndex="1",s()}return"mouseleave"===o.type?(o.target.removeEventListener("mouseleave",e),o.target.style.top=W[0]+"px",o.target.style.left=W[1]+"px",void(W=[])):void 0}function t(e,t){let n=e.getAttribute("data-sequence"),i=t.getAttribute("data-sequence");e.setAttribute("data-sequence",i),t.setAttribute("data-sequence",n),e.style.left=t.offsetLeft+"px",e.style.top=t.offsetTop+"px",t.style.top=W[0]+"px",t.style.left=W[1]+"px",W=[],!0===q&&setTimeout(function(){o()},350)}function o(){for(let e=0;e<j.length;e++){let t=j[e].getAttribute("data-sequence");T+=t,e==j.length-1&&(T==E?(q=!1,n()):T="")}}function n(){v=new Date;let e=v-y,t=e/1e3%60,o={minutes:Math.round(e/1e3/60),seconds:Math.floor(t)},n={moves:x,cancelled_moves:_,time_ms:e,time_s:Math.floor(e/1e3),time_m:e/1e3/60,time_formatted:o,total_shuffle:d,played_difficulty:a};if(u(n,j),!0===c)for(let e=0;e<j.length;e++)j[e].style.boxShadow="inset 0px 0px 0px #ccc"}function l(){h&&h(),g&&g();let e=document.querySelectorAll(f+" ._game_output .bg-elem");for(let o=0;o<d;o++){let n=Math.floor(Math.random()*e.length),l=Math.floor(Math.random()*e.length);if(W.push(e[n].offsetTop),W.push(e[n].offsetLeft),t(e[n],e[l]),o==d-1)if(!0===m)r();else{if(q=!0,!0===c)for(let e=0;e<j.length;e++)j[e].style.boxShadow="inset 1px 1px 3px #ccc";i(j)}}}function r(){let e=[],t=[];for(let o=0;o<j.length;o++)e.push(j[o].offsetTop),t.push(j[o].offsetLeft);let o=D/2-b/2,n=Y/2-w/2;for(let e=0;e<j.length;e++)j[e].style.top=o+"px",j[e].style.left=n+"px";V.style.top=o+"px",V.style.left=n+"px",V.style.width=w+"px",V.style.height=b+"px",V.style.backgroundPosition="-"+n+"px -"+o+"px",setTimeout(function(){for(let e=0;e<j.length;e++)j[e].style.transition="all 0.3s";for(let o=0;o<j.length;o++)setTimeout(function(){j[o].style.top=e[o]+"px",j[o].style.left=t[o]+"px"},100*o),o===j.length-1&&setTimeout(function(){if(q=!0,!0===c)for(let e=0;e<j.length;e++)j[e].style.boxShadow="inset 1px 1px 3px #ccc";i(j),g&&g(!0)},1+100*o);V.remove()},400)}function s(){!1!==q&&(q=!1,setTimeout(function(){q=!0},310))}let E="",T="",z=L.width,S=L.height,M=document.querySelector(f).offsetHeight,k=document.querySelector(f).offsetWidth,I=Math.min(k/z,M/S),Y=0,D=0;if("regular"===a&&(Y=7*Math.round(z*I/7),D=2*Math.round(S*I/2)),"hard"===a&&(Y=7*Math.round(z*I/7),D=3*Math.round(S*I/3)),document.querySelectorAll(f+" ._game_output .bg-elem")){let t=document.querySelectorAll(f+" ._game_output .bg-elem");for(let o=0;o<t.length;o++)t[o].removeEventListener("touchstart",e),t[o].removeEventListener("mousedown",e),t[o].removeEventListener("touchend",e),t[o].removeEventListener("mouseup",e)}let C=document.querySelector(f);for(;C.firstChild;)C.removeChild(C.firstChild);get_img_puzzle.holder===f&&clearTimeout(get_img_puzzle.wait),get_img_puzzle.holder=f;let X=document.createElement("DIV");X.classList.add("_game_output"),document.querySelector(f).appendChild(X),A=document.querySelector("._game_output");let H=0;"regular"===a&&(H=13),"hard"===a&&(H=20);for(let e=0;e<=H;e++)A.innerHTML+="<div data-piece='"+e+"' data-sequence="+e+" class='bg-elem'></div>\n";A.style.position="absolute",A.style.width=Y+"px",A.style.height=D+"px",A.style.left="50%",A.style.marginLeft=-Y/2+"px";let j=document.querySelectorAll(f+" ._game_output .bg-elem");for(let e=0;e<j.length;e++){let t=j[e].getAttribute("data-sequence");E+=t}for(let e=0;e<j.length;e++)j[e].style.position="absolute",j[e].style.backgroundImage="url('"+L.src+"')",j[e].style.backgroundSize=Y+"px "+D+"px",w=Y/7,j[e].style.width=w+"px","regular"===a&&(b=D/2),"hard"===a&&(b=D/3),j[e].style.height=b+"px";let P=0;for(let e=0;e<j.length;e++){j[e].style.left=w*P+"px","regular"===a&&(e<=6&&(j[e].style.top="0px"),e>6&&(j[e].style.top=b+"px")),"hard"===a&&(e<=6&&(j[e].style.top="0px"),e>6&&e<14&&(j[e].style.top=b+"px"),e>=14&&(j[e].style.top=b+b+"px"));let t=j[e].offsetLeft,o=j[e].offsetTop;j[e].style.backgroundPosition=-t+"px "+-o+"px",P++,7==P&&(P=0)}let V="";if(!0===m){let e=document.createElement("DIV");e.classList.add("overlay_div"),A.appendChild(e),V=document.querySelector(".overlay_div"),V.setAttribute("style","position: relative;width: 100%;height: 100%;left: 0px;top: 0px;background-image: url('"+L.src+"');background-size: "+Y+"px "+D+"px;background-position: -"+V.offsetLeft+"px -"+V.offsetTop+"px;z-index: 999;transition: all .3s linear;")}let W=[];for(let t=0;t<j.length;t++)j[t].addEventListener("touchstart",e),j[t].addEventListener("mousedown",e),j[t].addEventListener("touchend",e),j[t].addEventListener("mouseup",e);get_img_puzzle.wait=setTimeout(l,p)},Array.isArray(s)){let e=Math.floor(n(0,s.length-1));L.src=s[e]}"string"==typeof s&&(L.src=s)}